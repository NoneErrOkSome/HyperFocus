# **10.2 Bit Shifting `sll`, `srl`, `sra` in RISC-V**

Bit shifting operations in **RISC-V** move bits **left or right** within a register. These operations are useful for:

- **Multiplication and division by powers of 2**
- **Bit manipulation and encoding**
- **Extracting or aligning specific bit fields**

---

## **1ï¸âƒ£ Overview of Shift Instructions in RISC-V**

RISC-V provides **three shift instructions**:

|**Instruction**|**Operation**|**Effect on Bits**|
|---|---|---|
|`sll rd, rs1, rs2`|**Shift Left Logical**|`rd = rs1 << rs2` (Zeros fill right)|
|`srl rd, rs1, rs2`|**Shift Right Logical**|`rd = rs1 >> rs2` (Zeros fill left)|
|`sra rd, rs1, rs2`|**Shift Right Arithmetic**|`rd = rs1 >> rs2` (Sign bit fills left)|

ğŸ“Œ **Key Takeaways:**

- **Left shifting (`sll`) multiplies a number by `2^n`**.
- **Right shifting (`srl`) divides a number by `2^n` (unsigned).**
- **Arithmetic right shifting (`sra`) maintains the sign bit for signed numbers.**

---

## **2ï¸âƒ£ Shift Left Logical (`sll`)**

**Shifts bits to the left**, filling with **zeros** on the right.  
Each shift by `n` **multiplies the value by `2^n`**.

ğŸ“Œ **Example: `5 << 2`**

```
    5   =  00000101  (5 in decimal)
    5 << 2 = 00010100  (20 in decimal)
```

ğŸ“Œ **RISC-V Assembly**

```assembly
li a0, 5       # Load 5 into a0
li a1, 2       # Shift left by 2
sll a2, a0, a1 # a2 = a0 << a1
```

âœ… **Result:** `a2 = 20`

ğŸ“Œ **Common Uses of `sll`** âœ” **Multiplication by powers of 2**  
âœ” **Bitwise encoding**

---

## **3ï¸âƒ£ Shift Right Logical (`srl`)**

**Shifts bits to the right**, filling with **zeros** on the left.  
Each shift by `n` **divides the value by `2^n` (unsigned).**

ğŸ“Œ **Example: `20 >> 2`**

```
   20   =  00010100  (20 in decimal)
   20 >> 2 = 00000101  (5 in decimal)
```

ğŸ“Œ **RISC-V Assembly**

```assembly
li a0, 20      # Load 20 into a0
li a1, 2       # Shift right by 2
srl a2, a0, a1 # a2 = a0 >> a1
```

âœ… **Result:** `a2 = 5`

ğŸ“Œ **Common Uses of `srl`** âœ” **Unsigned division by powers of 2**  
âœ” **Extracting specific bit fields**

---

## **4ï¸âƒ£ Shift Right Arithmetic (`sra`)**

**Shifts bits to the right**, **preserving the sign bit** (leftmost bit).  
Each shift by `n` **divides signed numbers by `2^n`**.

ğŸ“Œ **Example: `-20 >> 2` (Signed Division)**

```
  -20   =  11101100  (Twoâ€™s complement)
  -20 >> 2 = 11111011  (-5 in decimal)
```

**Logical shift (`srl`) would have inserted zeros instead (`00011011` = 27, incorrect!).**

ğŸ“Œ **RISC-V Assembly**

```assembly
li a0, -20     # Load -20 into a0
li a1, 2       # Shift right by 2
sra a2, a0, a1 # a2 = a0 >> a1
```

âœ… **Result:** `a2 = -5`

ğŸ“Œ **Common Uses of `sra`** âœ” **Signed division by powers of 2**  
âœ” **Maintaining negative values correctly**

---

## **5ï¸âƒ£ Comparison of Shift Operations**

|**Instruction**|**Effect on Bits**|**Use Case**|
|---|---|---|
|**`sll rd, rs1, rs2`**|Shifts left, fills with `0s`|Multiplication by `2^n`|
|**`srl rd, rs1, rs2`**|Shifts right, fills with `0s`|Unsigned division by `2^n`|
|**`sra rd, rs1, rs2`**|Shifts right, fills with sign bit|Signed division by `2^n`|

ğŸ“Œ **Key Takeaways:**

- **Use `sll` for fast multiplication**.
- **Use `srl` for unsigned division**.
- **Use `sra` for signed division** (keeps sign bit).

---

### **ğŸ“Œ Next: 10.3 Masking and Setting Specific Bits (New Topic)**

Would you like to **continue with bit masking**, or do you have any questions before moving forward? ğŸš€
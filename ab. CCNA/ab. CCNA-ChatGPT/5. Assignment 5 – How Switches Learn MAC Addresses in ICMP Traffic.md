Perfect. Letâ€™s move forward.

---

# ğŸ§¾ Assignment 5 â€“ **How Switches Learn MAC Addresses in ICMP Traffic**

---

## ğŸ¯ **Objective**

Understand **how and when switches learn MAC addresses** by analyzing **ICMP (ping)** traffic. Youâ€™ll learn what triggers MAC learning, what â€œdynamicâ€ means in the MAC address table, and how a switch builds, maintains, and ages this table based on **source MAC addresses** in real-time.

---

## ğŸ§  **Why This Matters**

A switch is a **Layer 2 (Data Link Layer)** device. It doesnâ€™t understand IP addresses â€” it forwards frames based on **MAC addresses**.

However, a switch doesnâ€™t come with MAC info preloaded. It builds a **MAC address table dynamically** by watching the **source MAC address** of incoming Ethernet frames.

This lesson teaches:

- When and how MAC addresses are added to the switch
    
- What causes entries to be removed (aging or manual clearing)
    
- How ping traffic helps the switch learn devices
    

---

## ğŸ§° **What Youâ€™ll Use**

Your same topology:

- **PC0: 192.168.1.1**
    
- **PC1: 192.168.1.2**
    
- **PC2: 192.168.1.3**
    
- **SW1 (Cisco 2960 Layer 2 switch)**
    

---

## âœ… **What Youâ€™ll Do**

---

### ğŸ”§ Step 1 â€“ Start Fresh

1. On the switch:
    

```bash
SW1# clear mac address-table dynamic
SW1# show mac address-table
```

âœ… You should see an empty table (or very minimal output).

2. On all PCs:
    

```bash
arp -d
```

---

### ğŸ” Step 2 â€“ Go Into Simulation Mode

1. Switch to **Simulation Mode**.
    
2. Edit Filters â†’ check:
    
    - **Internet Control Message Protocol (ICMP)** âœ…
        
    - **Address Resolution Protocol (ARP)** âœ…
        

---

### ğŸ§ª Step 3 â€“ Trigger MAC Learning via Ping

On **PC0**, run:

```bash
ping 192.168.1.3
```

Step through the traffic using **â€œCapture/Forwardâ€**.

---

## ğŸ”¬ What to Observe

---

### ğŸŸ¡ **ARP Request** (Broadcast)

- Destination MAC = FF:FF:FF:FF:FF:FF
    
- **Switch floods the frame**
    
- **Switch learns PC0â€™s MAC** on the port it came from
    

âœ… **Why**: Switch always learns **source MAC** of any incoming frame.

---

### ğŸŸ¢ **ARP Reply** (Unicast)

- Destination MAC = PC0â€™s MAC
    
- Source MAC = PC2â€™s MAC
    
- **Switch learns PC2â€™s MAC**
    

âœ… **Why**: ARP reply is also a frame â€” switch sees the **source MAC** of PC2 and records it.

---

### ğŸ”µ **ICMP Echo Request + Reply**

- Echo Request: from PC0 to PC2
    
- Echo Reply: from PC2 to PC0
    
- **Switch learns both source MACs if it hasn't already**
    

âœ… **Each frame is an opportunity for learning the source MAC**.

---

### ğŸ“„ Step 4 â€“ Confirm the MAC Table

Back on the switch:

```bash
SW1# show mac address-table
```

âœ… You should now see 2 or 3 entries:

```
VLAN    MAC Address       Type        Ports
----    -----------       --------    -----
1       aabb.cc00.0101    DYNAMIC     Fa0/1
1       aabb.cc00.0102    DYNAMIC     Fa0/2
1       aabb.cc00.0103    DYNAMIC     Fa0/3
```

- All entries marked **DYNAMIC**
    
- Associated with the correct interface
    

---

## ğŸ“˜ What You Just Learned

|Topic|What You Observed|
|---|---|
|MAC Learning Mechanism|Switch learns source MACs from **every frame** it receives|
|ARP Request & Reply|Triggers MAC learning when devices donâ€™t know each other|
|ICMP Traffic|Continues MAC learning if a MAC wasnâ€™t already known|
|MAC Address Table|Populates dynamically and reflects the **port-to-MAC** relationships|
|Flooding vs. Unicast|Switch floods unknown MACs; unicast goes only to known destination ports|

---

## â³ Bonus: MAC Aging (Optional)

If you **wait 5 minutes** with no traffic, run:

```bash
SW1# show mac address-table
```

âœ… Some entries may disappear. Thatâ€™s because **dynamic MACs age out** if no frames are received from that MAC.

---

## ğŸ›  Bonus: Manual Clear

Try:

```bash
SW1# clear mac address-table dynamic interface FastEthernet0/1
```

âœ… Removes all learned MACs from that interface.

---

Let me know when you're ready for: â¡ï¸ **Assignment 6 â€“ MAC Address Table Aging & Management**  
Where we learn how long MAC entries stay, how to clear specific entries, and how switches deal with change.